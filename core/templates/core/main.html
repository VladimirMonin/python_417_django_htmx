<!-- core/templates/core/main.html -->
{% extends 'core/base.html' %}

{% block title %}Лента | TikToeken{% endblock title %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <h1 class="mb-4 text-center">Лента Тиктокена!!!</h1>

        <!-- Кнопка для обновления ленты -->
        <div class="text-center mb-4">
            <button 
                class="btn btn-outline-dark"
                hx-get="{% url 'core:post_list' %}"
                hx-target="#posts-container"
                hx-swap="innerHTML"
                hx-indicator="#posts-container">
                <i class="bi bi-arrow-clockwise"></i> Загрузить посты заново
            </button>
        </div>

        <!-- Контейнер для постов -->
        <div id="posts-list">
            {% for post in posts %}
                {% include 'core/_card.html' with post=post %}
            {% endfor %}
        </div>
        
        <!-- Пагинатор - обновляется через hx-swap-oob -->
        {% include 'core/_paginator.html' %}

        <div class="mb-4">
        <!-- Вставляем форму создания поста -->
        {% include 'core/_post_form.html' %}
        </div>

    </div>
</div>
{% endblock content %}
